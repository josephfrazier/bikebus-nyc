<!DOCTYPE html>
<html lang="en">
  <head>
    
    <!-- 
      This is the main Handlebars template for the site 
      - When the user visits the homepage or submits a color the app calls the endpoints in server.js
      - The server script passes data in here and the Handlebars code builds it into the HTML page
    -->
    
    <meta charset="utf-8" />
    <link rel="icon" href="https://glitch.com/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bike Bus Tracking Page</title> 
  </head>
  <body>
        <!-- This is the start of content for our page -->
        <h1 class="title">Bike Bus Tracking Page</h1>
        
    
        <script>
            
            const interval = setInterval(function() {
               getBusLocation();
             }, 5000);
          
            function updateLocationPreview(lat, long)
            {
              const previewElement = document.getElementById('location-preview');
              previewElement.prepend(lat + ", " + long + "\n")
              console.log(lat, long)
            }
          
            function getBusLocation()
            {
              fetch('/bus/location', {
                method: 'GET', // or 'PUT'
              })
                .then((response) => response.json())
                .then((data) => {
                  console.log('Success:', data)
                  updateLocationPreview(data.latitude, data.longitude)
                })
                .catch((error) => {
                  console.error('Error:', error)
                })
            }
            
        </script>
  </body>
</html>
